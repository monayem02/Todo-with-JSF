<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Todo List</title>
    <h:outputStylesheet library="webjars" name="primeflex/3.3.1/primeflex.min.css" />
    <style>
        .ui-paginator {
            margin-top: 4px;
            margin-bottom: -20px;
            background: #fff !important;
            border: none !important;
        }
        body .ui-card .ui-card-content {
            padding-bottom: 0 !important;
        }

        .ui-paginator-rpp-options {
            padding: 4px;
            background: white;
            border-radius: 3px;
        }

        .ui-filter-column .ui-column-customfilter .custom-filter {
            width: 100%;
            box-sizing: border-box;
        }
    </style>
</h:head>
<h:body style="background: #e5e5e5">
    <div class="flex justify-content-center">
        <div class="sm:col-8">
            <p:card styleClass="pb-0">
                <p:commandButton value="New Todo" icon="pi pi-plus" action="#{todoBean.prepareCreateTodo()}"
                                 styleClass="ui-button-success mb-3" style="margin-right: .5rem" />
                <h:form class="flex flex-column align-items-center">
                    <p:dataTable var="todo" value="#{todoBean.todoList}" id="todoTable" editable="true"  styleClass="tableStyle" widgetVar="todoTable"
                                 rowKey="#{todoBean.todo.id}" paginator="true" rows="5" selectionRowMode="add" paginatorPosition="bottom"
                                 rowsPerPageTemplate="5,10,15" selectionMode="single">
                        <p:column field="title" headerText="Title">
                            <h:outputText value="#{todo.title}" />
                        </p:column>

                        <p:column field="description" headerText="Description">
                            <h:outputText value="#{todo.description}" />
                        </p:column>

                        <p:column field="status" headerText="Status" filterMatchMode="exact">
                            <f:facet name="filter">
                                <p:selectOneMenu onchange="PF('todoTable').filter()" styleClass="ui-custom-filter w-12">
                                    <f:selectItem itemLabel="All" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{todoBean.statuses}" var="status" itemValue="#{status}" itemLabel="#{status.label}" />
                                    <f:selectItems value="#{todo.status}" />
                                </p:selectOneMenu>
                            </f:facet>
                        </p:column>

                        <p:column headerText="Action">
                            <p:commandButton styleClass="edit-button rounded-button ui-button-success mr-2"
                                             icon="pi pi-pencil" action="#{todoBean.editTodo(todo.id)}">
                            </p:commandButton>
                            <p:commandButton class="ui-button-warning rounded-button" update="todoTable"
                                             icon="pi pi-trash" action="#{todoBean.deleteTodo(todo)}">
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>
                </h:form>
            </p:card>
        </div>
    </div>
</h:body>
</html>